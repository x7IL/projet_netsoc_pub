Index: page/mur_commentaire.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\n<html lang=\"fr\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <link rel=\"stylesheet\" href=\"style.css\">\n        <title>Liste commentaires</title>\n    </head>\n    <body>\n        <h1>Accueil</h1>\n        <div id=\"post_message_accueil\">\n            <form action=\"#\" method=\"post\" id=\"post_messages\" style=\"margin-top: 3%; margin-bottom: 2%; background-color: #FAFAFA; border: 1px solid dodgerblue;\">\n\n                <?php\n                include \"function_used.php\";\n                if (isset($_COOKIE[\"email\"]) && isset($_COOKIE[\"username\"]) && isset($_COOKIE[\"password\"])) {\n                    ?>\n                    <div>\n                        <input type=\"hidden\" value=\"\">\n                        <label for=\"message\"></label><input type=\"text\" id=\"message\" name=\"message\" placeholder=\"What's happening\" style=\"border-radius: 9999px;\">\n                    </div>\n                    <input type=\"submit\" name=\"post_message\" id=\"post_message\" value=\"Post\" style=\"border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA\">\n                    <?php\n                    if (isset($_POST[\"post_message\"])) {\n\n                        $mysqli = join_database();\n                        $email = $_COOKIE[\"email\"];\n                        $id_user = $mysqli->query(\"SELECT id FROM user WHERE `email` = '$email'\");\n                        $id_user = $id_user->fetch_assoc();\n                        $id_user = implode(\",\", $id_user);\n                        insert_fields('post', [\"ID_user\" => $id_user, \"post\" => $_POST[\"message\"]]);  //mettre l'id user dans la requets\n                    }\n                }\n                else {\n                    echo \"pas connecté\";\n                }\n\n                ?>\n            </form>\n        </div>\n\n        <div>\n            <?php\n\n            global $mysqli;\n            $coms = [];\n            $result = $mysqli->query(\"SELECT * FROM `post` ORDER BY post_date DESC\");\n            while (($line = $result->fetch_assoc()))\n                $coms[] = $line;\n            ?>\n            <?php\n            foreach ($coms as $com){\n                $ID_user = $com[\"ID_user\"];\n                if ($ID_user!=NULL) {\n                    $username = $mysqli->query(\"SELECT username FROM profile WHERE id_user = '$ID_user'\");\n                    $username = $username->fetch_assoc();\n                    $username = implode(\",\", $username);\n                    ?>\n                    <div style=\"background-color: #FAFAFA; border: solid 1px dodgerblue; margin-top: 1%;\"><b style=\" max-width: 99%; word-wrap: break-word; \"><?=$username; ?> </b> <i style=\"opacity: 0.5;\"><?=$com[\"post_date\"]; ?></i><p style=\"font-size: 1.2em; margin-bottom: 0; max-width: 99%; word-wrap: break-word; \"><?=$com[\"post\"]; ?></p>\n                        <div style=\"background-color: #E3E9EF;\">\n                            <input type=\"button\" value=\"like\" style=\"background-color: dodgerblue;color: #FAFAFA;\">\n                            <input type=\"button\" value=\"comment\" style=\"background-color: dodgerblue;color: #FAFAFA;\">\n                        </div>\n\n                    </div>\n\n                    <?php\n\n                    if(isset($_COOKIE[\"login\"])){\n                        if ($_COOKIE[\"login\"] == $com[\"login\"]){\n                            ?><form action=\"\" class=\"form_delete_list_comment\" method=\"post\"><?php\n                            ?><input type=\"hidden\" name=\"supp\" value=\"<?php echo $com['id']?>\"/>\n                            <input id=\"delete\" name=\"delete\" type=\"submit\" value=\"Delete message\" style=\"border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA\"><br><?php\n\n                        }\n                    }\n                    ?></form>\n                    <?php\n                }\n            }\n            if(isset($_POST[\"delete\"])) {\n                delete_fields('post', 'id', $_POST['supp']);//verification_db('comment', \"id\",  \"message\", $com['message'], $_COOKIE['idmessage'])\n            }\n            ?>\n        </div>\n\n\n\n        <?php /*\n\n va faloir boucler sur la table post donc faire une nouvelle fonction\n\n        $coms = select_com('comment');\n        ?>\n        <?php foreach ($coms as $com){?>\n                <hr/>\n                <p>Id : <b><?=$com[\"id\"]; ?> :</b><br><?=$com[\"message\"]; ?> :<br><?=$com[\"post_date\"]; ?></p>\n            <?php\n        }\n        */ ?>\n    </body>\n</html>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/page/mur_commentaire.php b/page/mur_commentaire.php
--- a/page/mur_commentaire.php	(revision eae0470194cbffe2daa06ca05f089d1320a5a989)
+++ b/page/mur_commentaire.php	(date 1667932104695)
@@ -51,51 +51,58 @@
             foreach ($coms as $com){
                 $ID_user = $com["ID_user"];
                 if ($ID_user!=NULL) {
-                    $username = $mysqli->query("SELECT username FROM profile WHERE id_user = '$ID_user'");
-                    $username = $username->fetch_assoc();
-                    $username = implode(",", $username);
-                    ?>
-                    <div style="background-color: #FAFAFA; border: solid 1px dodgerblue; margin-top: 1%;"><b style=" max-width: 99%; word-wrap: break-word; "><?=$username; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0; max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
-                        <div style="background-color: #E3E9EF;">
-                            <input type="button" value="like" style="background-color: dodgerblue;color: #FAFAFA;">
-                            <input type="button" value="comment" style="background-color: dodgerblue;color: #FAFAFA;">
-                        </div>
+                $username_proprio = $mysqli->query("SELECT username FROM profile WHERE id_user = '$ID_user'");
+                $username_proprio = $username_proprio->fetch_assoc();
+                $username_proprio = implode(",", $username_proprio);
+                ?>
+                <div style=" border: solid 1px dodgerblue; background-color: #FAFAFA; margin-top: 1%;">
+                    <div style="">
+                        <?php
+                        if ($com["id_profile_destinataire"]){
+                            $username_destinataire = $mysqli->query("SELECT username FROM profile WHERE id_user = {$com["id_profile_destinataire"]}")->fetch_assoc();
+                            ?>
+                            <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?><i style="opacity: 0.5;"> pour </i><?= $username_destinataire["username"]; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                            <?php
+                        }
+                        else{
+                            ?>
+                            <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                            <?php
+                        }
+                        ?>
+                    </div>
+                    <div style="background-color: #E3E9EF;">
+                        <input type="button" value="like" style="background-color: dodgerblue;color: #FAFAFA;">
+                        <input type="button" value="comment" style="background-color: dodgerblue;color: #FAFAFA;">
+                    </div>
+                    <?php
 
-                    </div>
-
-                    <?php
-
-                    if(isset($_COOKIE["login"])){
-                        if ($_COOKIE["login"] == $com["login"]){
-                            ?><form action="" class="form_delete_list_comment" method="post"><?php
-                            ?><input type="hidden" name="supp" value="<?php echo $com['id']?>"/>
-                            <input id="delete" name="delete" type="submit" value="Delete message" style="border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA"><br><?php
-
-                        }
-                    }
-                    ?></form>
-                    <?php
-                }
-            }
-            if(isset($_POST["delete"])) {
-                delete_fields('post', 'id', $_POST['supp']);//verification_db('comment', "id",  "message", $com['message'], $_COOKIE['idmessage'])
-            }
-            ?>
+                    if(isset($_COOKIE["username"])){
+                    if ($_COOKIE["username"] == $username_proprio){
+                    ?>
+                    <form action="#" class="form_delete_comment" method="post" ><?php
+                        ?>
+                        <input type="hidden" name="supp" value="<?php echo $com['id']?>"/>
+                        <input id="delete" name="delete" type="submit" value="Delete message" style="border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA; float:right; margin-top: -28px">
+                        <?php
+                        }
+                        }
+                        ?>
+                    </form>
+                </div>
+        </div>
+        <?php
+        }
+        }
+        if(isset($_POST["delete"])){
+            delete_fields('post', 'id', $_POST['supp']);//verification_db('comment', "id",  "message", $com['message'], $_COOKIE['idmessage'])
+            //header("Refresh:0"); //message d'erreur
+            ?>
+            <meta http-equiv="refresh" content="0">
+            <?php
+        }
+        ?>
         </div>
-
-
-
-        <?php /*
-
- va faloir boucler sur la table post donc faire une nouvelle fonction
-
-        $coms = select_com('comment');
-        ?>
-        <?php foreach ($coms as $com){?>
-                <hr/>
-                <p>Id : <b><?=$com["id"]; ?> :</b><br><?=$com["message"]; ?> :<br><?=$com["post_date"]; ?></p>
-            <?php
-        }
-        */ ?>
+        </div>
     </body>
 </html>
Index: page/profile.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"style.css\">\n    <title>Profile</title>\n</head>\n<body>\n<h1>Profile</h1>\n<div>\n    <?php\n    include \"function_used.php\";\n    global $mysqli;\n\n    $email = $_COOKIE[\"email\"];\n    $username = $mysqli->query(\"SELECT username FROM user WHERE email = '$email'\");\n    $username = $username->fetch_assoc();\n    $username = implode(\",\", $username);\n\n    ?>\n    <h2>Bonjour <?php print_r($username) ?></h2>\n\n    <div id=\"div_bio\" style=\" border: 1px solid dodgerblue; background-color: #FAFAFA\">\n        <?php\n\n        $mysqli = join_database();\n        if (isset($_COOKIE['email']) && isset($_COOKIE['password'])) {\n            $result_can = $mysqli->query(\"SELECT * FROM user WHERE email = '{$_COOKIE['email']}' AND password ='{$_COOKIE['password']}'\");\n            $result_can = $result_can->fetch_assoc();\n            $query = \"SELECT * FROM profile WHERE id_user = '{$result_can['id']}'\";\n            $result = $mysqli->query($query);\n\n            if ($result) {\n                // output data of each row\n                echo '<h3>Biographie:</h3>';\n                while ($row = $result->fetch_assoc()) {\n                    echo \"<p style='font-size: 1.1em'>{$row['biographie']}</p>\";\n                }\n\n                if (isset($_POST['modifier']) && isset($_POST['id'])) {\n\n                    $sql = \"UPDATE profile SET biographie='{$_POST['modifier']}' WHERE id_user ='{$result_can['id']}'\";\n                    if ($mysqli->query($sql) === TRUE) {\n                        header(\"Refresh:0\");\n                    } else {\n                        echo \"Error updating record: \" . $mysqli->error;\n                    }\n                }\n            }\n            else {\n                $result_can = null;\n                echo \"Non connecté\";\n            }\n            ?>\n            <form action=\"\" id=\"modif_bio\" method=\"POST\">\n                <label for=\"modifier\"></label><input type=\"text\" id=\"modifier\" name=\"modifier\" placeholder=\"Inserez le message à remplacer\" style=\"border-radius: 9999px;\"/>\n                <input type=\"hidden\" id=\"modif_bio_submit\" name=\"id\"  value=\"<?php echo $row['ID']?>\" /><br>\n                <input type=\"submit\" value=\"modifier la bio\" style=\"border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA\">\n            </form>\n            <?php\n        }\n        ?>\n    </div>\n\n    <div id=\"post_message_profile\" style=\"margin-top: 3%; background-color: #FAFAFA; border: 1px solid dodgerblue;\" >\n        <form action=\"#\" method=\"post\" id=\"post_messages\">\n\n            <?php\n\n            if (isset($_COOKIE[\"email\"]) && isset($_COOKIE[\"username\"]) && isset($_COOKIE[\"password\"])) {\n                ?>\n                <div>\n                    <input type=\"hidden\" value=\"\">\n                    <label for=\"message\"></label><input type=\"text\" id=\"message\" name=\"message\" placeholder=\"What's happening\" style=\"border-radius: 9999px;\">\n                </div>\n                <input type=\"submit\" name=\"post_message\" id=\"post_message\" value=\"Post\" style=\"border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA\">\n                <?php\n                if (isset($_POST[\"post_message\"])) {\n\n                    $mysqli = join_database();\n                    $email = $_COOKIE[\"email\"];\n                    $id_user = $mysqli->query(\"SELECT id FROM user WHERE `email` = '$email'\");\n                    $id_user = $id_user->fetch_assoc();\n                    $id_user = implode(\",\", $id_user);\n                    insert_fields('post', [\"ID_user\" => $id_user, \"post\" => $_POST[\"message\"]]);  //mettre l'id user dans la requets\n                }\n            }\n            else {\n                echo \"pas connecté\";\n            }\n\n            ?>\n        </form>\n    </div>\n\n    <div id=\"list_message\" \">\n        <?php\n\n        global $mysqli;\n        $coms = [];\n        $result = $mysqli->query(\"SELECT * FROM `post` ORDER BY post_date DESC\");\n        while (($line = $result->fetch_assoc()))\n            $coms[] = $line;\n        ?>\n        <?php\n        foreach ($coms as $com){\n            $ID_user = $com[\"ID_user\"];\n            if ($ID_user!=NULL) {\n                $username = $mysqli->query(\"SELECT username FROM profile WHERE id_user = '$ID_user'\");\n                $username = $username->fetch_assoc();\n                $username = implode(\",\", $username);\n                ?>\n                <div style=\" border: solid 1px dodgerblue; background-color: #FAFAFA; margin-top: 1%;\">\n                    <div style=\"\">\n                        <b style=\" max-width: 99%; word-wrap: break-word; \"><?=$username; ?> </b> <i style=\"opacity: 0.5;\"><?=$com[\"post_date\"]; ?></i><p style=\"font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; \"><?=$com[\"post\"]; ?></p>\n                    </div>\n                    <div>\n                        <div style=\"background-color: #E3E9EF; display: block\">\n                            <input type=\"button\" id=\"like\" value=\"like\" style=\"background-color: dodgerblue;color: #FAFAFA;\">\n                            <input type=\"button\" value=\"comment\" style=\"background-color: dodgerblue;color: #FAFAFA;\">\n                        </div>\n                        <?php\n\n                        if(isset($_COOKIE[\"username\"])){\n                            if ($_COOKIE[\"username\"] == $username){\n                            ?>\n                            <form action=\"#\" class=\"form_delete_comment\" method=\"post\" ><?php\n                                ?>\n                                <input type=\"hidden\" name=\"supp\" value=\"<?php echo $com['id']?>\"/>\n                                <input id=\"delete\" name=\"delete\" type=\"submit\" value=\"Delete message\" style=\"border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA; float:right; margin-top: -28px\">\n                                <?php\n                                }\n                            }\n                            ?>\n                        </form>\n                    </div>\n                </div>\n                <?php\n            }\n        }\n        if(isset($_POST[\"delete\"])){\n            delete_fields('post', 'id', $_POST['supp']);//verification_db('comment', \"id\",  \"message\", $com['message'], $_COOKIE['idmessage'])\n            //header(\"Refresh:0\"); //message d'erreur\n            ?>\n            <meta http-equiv=\"refresh\" content=\"0\">\n    <?php\n        }\n        ?>\n    </div>\n</div>\n\n\n</body>\n</html>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/page/profile.php b/page/profile.php
--- a/page/profile.php	(revision eae0470194cbffe2daa06ca05f089d1320a5a989)
+++ b/page/profile.php	(date 1667931564039)
@@ -106,13 +106,25 @@
         foreach ($coms as $com){
             $ID_user = $com["ID_user"];
             if ($ID_user!=NULL) {
-                $username = $mysqli->query("SELECT username FROM profile WHERE id_user = '$ID_user'");
-                $username = $username->fetch_assoc();
-                $username = implode(",", $username);
+                $username_proprio = $mysqli->query("SELECT username FROM profile WHERE id_user = '$ID_user'");
+                $username_proprio = $username_proprio->fetch_assoc();
+                $username_proprio = implode(",", $username_proprio);
                 ?>
                 <div style=" border: solid 1px dodgerblue; background-color: #FAFAFA; margin-top: 1%;">
                     <div style="">
-                        <b style=" max-width: 99%; word-wrap: break-word; "><?=$username; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                        <?php
+                        if ($com["id_profile_destinataire"]){
+                            $username_destinataire = $mysqli->query("SELECT username FROM profile WHERE id_user = {$com["id_profile_destinataire"]}")->fetch_assoc();
+                            ?>
+                            <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?><i style="opacity: 0.5;"> pour </i><?= $username_destinataire["username"]; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                            <?php
+                        }
+                        else{
+                            ?>
+                            <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                            <?php
+                        }
+                        ?>
                     </div>
                     <div>
                         <div style="background-color: #E3E9EF; display: block">
Index: page/sign_up.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"style.css\">\n    <title>Sign Up</title>\n</head>\n<body>\n<h1>Sign Up</h1>\n<form class=\"formulaire_inscription\" action=\"\" method=\"POST\" style=\"word-spacing: 2px;\">\n    <label><b>Nom d'utilisateur</b></label>\n    <label>\n        <input type=\"text\" placeholder=\"Entrer le nom d'utilisateur\" name=\"username\" required>\n    </label>\n    <br>\n    <label><b>Adresse e-mail</b></label>\n    <label>\n        <input type=\"email\" placeholder=\"Entrer votre adresse nail\" name=\"email\" required>\n    </label>\n    <br>\n    <label><b>Mot de passe</b></label>\n    <label>\n        <input type=\"password\" placeholder=\"Entrer le mot de passe\" name=\"password\" required>\n    </label>\n    <br>\n    <label><b>Verification de mot de passe</b></label>\n    <label>\n        <input type=\"password\" placeholder=\"Re entrer le mot de passe\" name=\"repassword\" required>\n    </label>\n    <br>\n    <label><b>Genre</b></label>\n    <label>\n        <input type=\"radio\" name=\"genre\" value=\"Homme\" checked>\n    </label>\n    <label for=\"H\">Homme</label>\n    <label>\n        <input type=\"radio\" name=\"genre\" value=\"Femme\">\n    </label>\n    <label for=\"F\">Female</label>\n    <br>\n    <label><b>Age</b></label>\n    <label>\n        <input type=\"number\" placeholder=\"Entrer votre age\" name=\"age\" min=\"18\" max=\"100\" required>\n    </label>\n    <br>\n    <input type=\"submit\" id='submit' value='valider' >\n    <br>\n    <!--    <button onclick =\"window.location='index.php?name=login.php'\">Se connecter</button>-->\n</form>\n\n<?php\n    //include \"join_db.php\";\n\n    if (isset($_POST[\"password\"]) && isset($_POST[\"username\"]) && isset($_POST[\"repassword\"]) && isset($_POST[\"email\"])) {\n        $mysqli = join_database();\n\n\n        $user = $_POST[\"username\"];\n        $password = $_POST[\"password\"];\n        $repassword = $_POST[\"repassword\"];\n        $email = $_POST[\"email\"];\n        $genre = $_POST[\"genre\"];\n        $age = $_POST[\"age\"];\n\n        $result_can = mysqli_query($mysqli, \"SELECT email FROM user WHERE email = '$email'\");\n\n\n        if (mysqli_num_rows($result_can) == 0) {\n            if ($repassword == $password) {\n                global $mysqli;\n                $message = \"ok\";\n                $hash = hash(\"whirlpool\", $password);\n                // Password Hashing is used here.\n                $sql = \"INSERT INTO user (username, password, email, genre, age) VALUES ('$user', '$hash','$email','$genre','$age')\";\n                if ($mysqli->query($sql) === TRUE) {\n                    setcookie(\"username\", $_POST[\"username\"], time() + 3600);\n                    setcookie(\"email\", $_POST[\"email\"], time() + 3600);\n                    setcookie(\"password\", $hash, time() + 3600);\n                    $result_can = $mysqli->query(\"SELECT * FROM user WHERE email = '$email' AND password ='$hash'\");\n                    $result_can = $result_can->fetch_assoc();\n                    $bio = \"INSERT INTO profile (biographie, id_user ,username) VALUES ('Biographie de $user', '{$result_can['id']}', '$user')\";\n                    $mysqli->query($bio);\n                } else {\n                    echo \"<br>Error: \" . $sql . \"<br>\" . $mysqli->error;\n                }\n                header('Location: index.php');\n            } else {\n                header('Location: index.php?erreur=3');\n            }\n        } else {\n            $message = \"non\";\n            header('Location: index.php?erreur=2');\n        }\n    }\n    //gestion des messages d'erreurs\n    if (isset($_COOKIE)) {\n        if (isset($_GET['erreur'])) {\n            $err = $_GET['erreur'];\n            if ($err == 1)\n                echo \"<h1>Utilisateur ou mot de passe incorrect</h1>\";\n            if ($err == 2)\n                echo \"<h1>le nom d'utilisateur existe deja</h1>\";\n            if ($err == 3)\n                echo \"<h1>les mots de passe ne correspondent pas</h1>\";\n        }\n    }\nmysqli_close($mysqli);\n?>\n\n</body>\n</html>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/page/sign_up.php b/page/sign_up.php
--- a/page/sign_up.php	(revision eae0470194cbffe2daa06ca05f089d1320a5a989)
+++ b/page/sign_up.php	(date 1667928560628)
@@ -63,9 +63,10 @@
         $age = $_POST["age"];
 
         $result_can = mysqli_query($mysqli, "SELECT email FROM user WHERE email = '$email'");
+        $result_can_login = mysqli_query($mysqli, "SELECT username FROM user WHERE username = '$user'");
 
 
-        if (mysqli_num_rows($result_can) == 0) {
+        if (mysqli_num_rows($result_can) == 0 and mysqli_num_rows($result_can_login) == 0) {
             if ($repassword == $password) {
                 global $mysqli;
                 $message = "ok";
@@ -99,7 +100,7 @@
             if ($err == 1)
                 echo "<h1>Utilisateur ou mot de passe incorrect</h1>";
             if ($err == 2)
-                echo "<h1>le nom d'utilisateur existe deja</h1>";
+                echo "<h1>le nom d'utilisateur existe deja et l'adresse mail</h1>";
             if ($err == 3)
                 echo "<h1>les mots de passe ne correspondent pas</h1>";
         }
Index: page/search.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\n    global $mysqli;\n    $output = '' ;\n    if (isset($_GET['searchVal'])){\n        $searchq = $_GET['searchVal'];\n        $searchq = preg_replace(\"#[^0-9a-z]#i\",\"\",$searchq);\n        $query = mysqli_query($mysqli, \"SELECT * FROM user WHERE username LIKE '%\".$searchq.\"%' LIMIT 20 \")or die(\"Could not search!\");\n        $count = mysqli_num_rows($query);\n        if($count == 0){\n            $output = '<div>No results!</div>';\n        }else{\n            while($row = mysqli_fetch_array($query)){\n                ?>\n                <!--                            <div>--><?php //echo \"pseudo : \".$row['username']; ?><!--</div>-->\n                <a href=\"index.php?variable=profile_guest.php&profile_guest=<?php echo $row['username']?>\"><?php echo $row['username']?></a>\n                <br>\n                <?php\n            } // while\n        } // else\n    } // main if\n?>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/page/search.php b/page/search.php
--- a/page/search.php	(revision eae0470194cbffe2daa06ca05f089d1320a5a989)
+++ b/page/search.php	(date 1667934473109)
@@ -4,7 +4,7 @@
     if (isset($_GET['searchVal'])){
         $searchq = $_GET['searchVal'];
         $searchq = preg_replace("#[^0-9a-z]#i","",$searchq);
-        $query = mysqli_query($mysqli, "SELECT * FROM user WHERE username LIKE '%".$searchq."%' LIMIT 20 ")or die("Could not search!");
+        $query = mysqli_query($mysqli, "SELECT * FROM profile WHERE username LIKE '%".$searchq."%' LIMIT 20 ")or die("Could not search!");
         $count = mysqli_num_rows($query);
         if($count == 0){
             $output = '<div>No results!</div>';
@@ -12,7 +12,10 @@
             while($row = mysqli_fetch_array($query)){
                 ?>
                 <!--                            <div>--><?php //echo "pseudo : ".$row['username']; ?><!--</div>-->
-                <a href="index.php?variable=profile_guest.php&profile_guest=<?php echo $row['username']?>"><?php echo $row['username']?></a>
+
+                <div style="background-color: #FAFAFA; border: solid 1px dodgerblue; background-color: #FAFAFA; margin-top: 1%;">
+                    <a href="index.php?variable=profile_guest.php&profile_guest=<?php echo $row['username']?>" style="text-decoration: none; font-size: 1.2em; color: black; max-width: 99%""><?php echo $row['username']?></a><i style="opacity: 0.5;"> <?php echo $row['biographie']?> </i>
+                </div>
                 <br>
                 <?php
             } // while
Index: page/profile_guest.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\n\n\nglobal $mysqli;\nprint_r($_GET['profile_guest']);\n$username = mysqli_query($mysqli,\"SELECT * FROM profile WHERE username = '{$_GET['profile_guest']}'\");\n$row_cnt = $username->num_rows;\n$username = $username->fetch_assoc()\n?>\n\n<?php\n\nif($row_cnt==1){\n    ?>\n    <h1>Profile de <?php echo $_GET['profile_guest'] ?></h1>\n    <div>\n        <div id=\"div_bio\" style=\" border: 1px solid dodgerblue; background-color: #FAFAFA\">\n    <?php\n    echo '<h3>Biographie:</h3>';\n    echo \"<p style='font-size: 1.1em'>{$username['biographie']}</p>\";\n\n}\nelse{\n    echo \"erreur\";\n}?>\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/page/profile_guest.php b/page/profile_guest.php
--- a/page/profile_guest.php	(revision eae0470194cbffe2daa06ca05f089d1320a5a989)
+++ b/page/profile_guest.php	(date 1667932880546)
@@ -1,8 +1,7 @@
 <?php
-
+include "function_used.php";
 
 global $mysqli;
-print_r($_GET['profile_guest']);
 $username = mysqli_query($mysqli,"SELECT * FROM profile WHERE username = '{$_GET['profile_guest']}'");
 $row_cnt = $username->num_rows;
 $username = $username->fetch_assoc()
@@ -18,8 +17,110 @@
     <?php
     echo '<h3>Biographie:</h3>';
     echo "<p style='font-size: 1.1em'>{$username['biographie']}</p>";
+    ?>
+        </div>
+    </div>
+
+    <div id="post_message_profile" style="margin-top: 3%; background-color: #FAFAFA; border: 1px solid dodgerblue;" >
+        <form action="#" method="post" id="post_messages">
+
+            <?php
+
+            if (isset($_COOKIE["email"]) && isset($_COOKIE["username"]) && isset($_COOKIE["password"])) {
+                ?>
+            <div>
+                <input type="hidden" value="">
+                <label for="message"></label><input type="text" id="message" name="message" placeholder="What's happening" style="border-radius: 9999px;">
+            </div>
+            <input type="submit" name="post_message" id="post_message" value="Post" style="border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA">
+            <?php
+            if (isset($_POST["post_message"])) {
+
+                $mysqli = join_database();
+                $email = $_COOKIE["email"];
+                $id_user = $mysqli->query("SELECT id FROM user WHERE `email` = '$email'");
+                $id_user = $id_user->fetch_assoc();
+                $id_user = implode(",", $id_user);
+                $user_destinataire = ($mysqli->query("SELECT id FROM user WHERE username = '{$_GET['profile_guest']}'"))->fetch_assoc();
+                insert_fields('post', ["ID_user" => $id_user, "post" => $_POST["message"], "id_profile_destinataire" => $username['id_user']]);  //mettre l'id user dans la requets
+            }
+            }
+            else {
+                echo "pas connecté";
+            }
+
+            ?>
+            </form>
+        </div>
+
+    <div id="list_message_profile_recherche" ">
+    <?php
+    $coms = [];
+    $result = $mysqli->query("SELECT * FROM `post` ORDER BY post_date DESC");
+    while (($line = $result->fetch_assoc()))
+        $coms[] = $line;
+    ?>
+    <?php
+    foreach ($coms as $com){
+        $ID_user = $com["ID_user"];
+        if ($ID_user!=NULL) {
+            $username_proprio = $mysqli->query("SELECT username FROM profile WHERE id_user = '$ID_user'");
+            $username_proprio = $username_proprio->fetch_assoc();
+            $username_proprio = implode(",", $username_proprio);
+            ?>
+            <div style=" border: solid 1px dodgerblue; background-color: #FAFAFA; margin-top: 1%;">
+                <div style="">
+                    <?php
+                    $requete_verif_destinataire = $mysqli->query("SELECT id_profile_destinataire FROM post WHERE id_profile_destinataire IS NOT NULL")->fetch_assoc();
+                    if ($requete_verif_destinataire){?>
+                        <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?><i style="opacity: 0.5;"> pour </i><?=$username["username"]; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                        <?php
+                    }
+                    else{
+                        ?>
+                    <b style=" max-width: 99%; word-wrap: break-word; "><?=$username_proprio; ?> </b> <i style="opacity: 0.5;"><?=$com["post_date"]; ?></i><p style="font-size: 1.2em; margin-bottom: 0  max-width: 99%; word-wrap: break-word; "><?=$com["post"]; ?></p>
+                        <?php
+                    }
+                    ?>
+                </div>
+                <div>
+                    <div style="background-color: #E3E9EF; display: block">
+                        <input type="button" id="like" value="like" style="background-color: dodgerblue;color: #FAFAFA;">
+                        <input type="button" value="comment" style="background-color: dodgerblue;color: #FAFAFA;">
+                    </div>
+                    <?php
+
+                    if(isset($_COOKIE["username"])){
+                    if ($_COOKIE["username"] == $username){
+                    ?>
+                    <form action="#" class="form_delete_comment" method="post" ><?php
+                        ?>
+                        <input type="hidden" name="supp" value="<?php echo $com['id']?>"/>
+                        <input id="delete" name="delete" type="submit" value="Delete message" style="border-radius: 9999px; background-color: dodgerblue; color: #FAFAFA; float:right; margin-top: -28px">
+                        <?php
+                        }
+                        }
+                        ?>
+                    </form>
+                </div>
+            </div>
+            <?php
+        }
+    }
+    if(isset($_POST["delete"])){
+        delete_fields('post', 'id', $_POST['supp']);//verification_db('comment', "id",  "message", $com['message'], $_COOKIE['idmessage'])
+        //header("Refresh:0"); //message d'erreur
+        ?>
+        <meta http-equiv="refresh" content="0">
+        <?php
+    }
+    ?>
+    </div>
+    </div>
+            <?php
 
 }
 else{
     echo "erreur";
 }?>
+
